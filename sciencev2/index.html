<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improvement in Food Resources | Class 9 Presentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0">
    
    <style>
        :root {
            --glass-bg: rgba(15, 23, 42, 0.6);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            --primary-accent: #fbbf24; /* Amber 400 */
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
        }

        /* Enforce custom cursor everywhere */
        *, *::before, *::after {
            cursor: none !important;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617; /* Slate 950 */
            color: var(--text-primary);
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            user-select: none;
        }

        h1, h2, h3, .serif {
            font-family: 'Playfair Display', serif;
        }

        /* --- Custom Cursor Canvas --- */
        #cursor-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: exclusion;
        }

        /* --- Background Mesh Animation --- */
        .gradient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            background: radial-gradient(circle at 50% 50%, #1e293b, #020617);
            overflow: hidden;
        }

        .blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.5;
            animation: float 20s infinite ease-in-out alternate;
            /* Added transition for position changes with bouncy ease */
            transition: top 2.5s cubic-bezier(0.34, 1.3, 0.64, 1), left 2.5s cubic-bezier(0.34, 1.3, 0.64, 1);
        }
        .blob-1 { width: 60vw; height: 60vw; background: #3730a3; top: -10%; left: -10%; animation-duration: 25s; } /* Indigo */
        .blob-2 { width: 50vw; height: 50vw; background: #b45309; top: 40%; left: 60%; animation-duration: 22s; animation-delay: -5s; } /* Amber */
        .blob-3 { width: 40vw; height: 40vw; background: #064e3b; top: 80%; left: 20%; animation-duration: 28s; animation-delay: -10s; } /* Emerald */

        @keyframes float {
            0% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(50px, 20px) scale(1.05); }
            100% { transform: translate(-20px, 50px) scale(0.95); }
        }

        /* --- Glassmorphism Utilities --- */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
            border-radius: 24px;
        }
        
        .glass-text {
            background: linear-gradient(135deg, #ffffff 0%, #cbd5e1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        /* --- Transitions --- */
        .view-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            opacity: 0;
            pointer-events: none;
            transition: none;
        }

        .view-active {
            opacity: 1;
            pointer-events: auto;
        }

        /* Animations - Updated with Bouncy Easing */
        /* cubic-bezier(0.34, 1.56, 0.64, 1) creates the bouncy overshoot effect */
        .animate-enter { animation: enter 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; opacity: 0; transform: translateY(40px); }
        .animate-scale { animation: scaleIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; opacity: 0; transform: scale(0.8); }
        
        @keyframes enter { to { opacity: 1; transform: translateY(0); } }
        @keyframes scaleIn { to { opacity: 1; transform: scale(1); } }
        
        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        .delay-4 { animation-delay: 0.4s; }
        .delay-5 { animation-delay: 0.5s; }
        .delay-6 { animation-delay: 0.6s; }

        /* --- Components --- */
        .bullet-point {
            display: flex;
            align-items: start;
            gap: 1rem;
            padding: 1rem;
            border-radius: 12px;
            transition: background 0.3s;
        }
        .bullet-point:hover { background: rgba(255,255,255,0.05); }
        
        .marker-icon {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            padding: 0.5rem;
            border-radius: 50%;
        }

        .img-card {
            position: relative;
            overflow: hidden;
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .img-card img {
            transition: transform 0.7s ease;
        }
        .img-card:hover img {
            transform: scale(1.05);
        }

        /* Progress Bar & Controls */
        .progress-container {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            right: 2rem;
            z-index: 50;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease;
        }

        /* State: Hidden in Fullscreen (Taskbar style) */
        .ui-hidden {
            transform: translateY(150%);
            opacity: 0;
            pointer-events: none;
        }

        .progress-track {
            flex: 1;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #fbbf24;
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
        }

        /* Watermark */
        .watermark {
            position: fixed;
            bottom: 1.5rem;
            right: 2rem;
            z-index: 40; /* Behind controls if they overlap */
            display: flex;
            align-items: center;
            gap: 12px;
            pointer-events: none;
            text-align: right;
            opacity: 0.8;
            transition: opacity 0.3s;
        }
        
        /* Loading Overlay */
        #loader {
            position: fixed;
            inset: 0;
            background: #020617;
            z-index: 10000;
            display: flex;
            flex-col;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease;
        }
        .loader-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(251, 191, 36, 0.3);
            border-radius: 50%;
            border-top-color: #fbbf24;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 1rem;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* --- Mobile Optimizations --- */
        @media (max-width: 768px) {
            body {
                overflow-y: auto;
                overflow-x: hidden;
            }

            *, *::before, *::after {
                cursor: auto !important;
            }

            #cursor-canvas {
                display: none;
            }

            .view-container {
                padding: 1rem;
                align-items: flex-start;
                padding-top: 2rem;
                min-height: 100vh;
                height: auto;
            }

            .glass-panel {
                border-radius: 16px;
            }

            .progress-container {
                bottom: 0.75rem;
                left: 0.75rem;
                right: 0.75rem;
                padding: 0.5rem 1rem;
                gap: 0.75rem;
                border-radius: 16px;
            }

            .watermark {
                bottom: 4rem;
                right: 1rem;
                gap: 8px;
            }

            .watermark img {
                height: 1.5rem;
            }

            .blob {
                filter: blur(60px);
                opacity: 0.3;
            }
            .blob-1 { width: 80vw; height: 80vw; }
            .blob-2 { width: 60vw; height: 60vw; }
            .blob-3 { width: 50vw; height: 50vw; }
        }
    </style>
</head>
<body>

    <!-- Loading Screen -->
    <div id="loader">
        <div class="loader-spinner"></div>
        <div class="text-amber-400 font-mono text-sm tracking-widest uppercase">Loading Assets...</div>
        <div id="loader-progress" class="text-gray-500 text-xs mt-2 font-mono">0%</div>
    </div>

    <!-- Background -->
    <div class="gradient-bg">
        <!-- Blobs will be moved by JS -->
        <div class="blob blob-1" id="blob-1"></div>
        <div class="blob blob-2" id="blob-2"></div>
        <div class="blob blob-3" id="blob-3"></div>
    </div>

    <!-- Custom Cursor -->
    <canvas id="cursor-canvas"></canvas>

    <!-- Main Stage -->
    <main id="stage" class="relative w-full h-full">
        <!-- Views rendered by JS -->
    </main>

    <!-- Watermark -->
    <div class="watermark">
        <div class="flex flex-col">
            <span class="text-[10px] text-gray-500 font-light tracking-widest uppercase opacity-40 leading-none mb-1">Hosted On</span>
            <span class="text-sm text-gray-300 font-serif italic tracking-wide opacity-70">D'Verse</span>
        </div>
        <img src="https://raw.githubusercontent.com/Dcode9/D-verse/334e4e91469fe01722191b729d92b0c090b77eaf/D_Ai_Logo.ico" 
             alt="D'Verse Logo" 
             class="h-10 w-auto opacity-80">
    </div>

    <!-- Controls & Progress -->
    <div id="ui-controls" class="progress-container glass-panel px-6 py-4">
        <button onclick="prevSlide()" class="hover:text-amber-400 transition-colors" data-hover>
            <span class="material-symbols-outlined">arrow_back</span>
        </button>
        
        <span id="slide-count" class="text-sm font-mono text-gray-400 min-w-[3ch] text-center">1/10</span>
        
        <div class="progress-track">
            <div id="progress" class="progress-fill" style="width: 10%;"></div>
        </div>

        <button onclick="nextSlide()" class="hover:text-amber-400 transition-colors" data-hover>
            <span class="material-symbols-outlined">arrow_forward</span>
        </button>
        
        <button onclick="toggleFullscreen()" class="ml-4 hover:text-white text-gray-400 transition-colors" data-hover>
            <span class="material-symbols-outlined">fullscreen</span>
        </button>
    </div>

    <script>
        /* * Content Data
         */
        const views = [
            {
                id: 1,
                type: 'hero',
                subtitle: "Advanced Apiculture & Agricultural Systems",
                title: "Improvement in Food Resources",
                points: [
                    "The Micro: High-yield Bee-keeping Strategies (Apiculture)",
                    "The Macro: Integrating Crops, Livestock, and Fisheries",
                    "The Goal: Sustainable bio-engineering for a growing population"
                ],
                img: "https://encrypted-tbn1.gstatic.com/licensed-image?q=tbn:ANd9GcQiHeg_a4-Hb3a-GaSXdxp9imbybDaiRYpB8NHfEaaZ3e4jgd8_Kwux8mlGcjAjmfkmzxH_ZMVboYXUdF0"
            },
            {
                id: 2,
                type: 'team',
                title: "Meet Our Team",
                subtitle: "The Minds Behind This Presentation",
                members: [
                    { name: "Ananya Yadav", role: "leader" },
                    { name: "Dhairya Shah", role: "member" },
                    { name: "Om Waghmare", role: "member" },
                    { name: "Yash ", role: "member" },
                    { name: "Sarthak Kulkarni", role: "member" },
                ]
            },
            {
                id: 3,
                type: 'split',
                title: "The Economics of Apiculture",
                subtitle: "Low Investment, High Returns",
                left: [
                    { title: "Commercial Products", text: "Production of Honey (High nutritional value) and Beeswax (Medicinal & industrial applications)." },
                    { title: "Financial Strategy", text: "Minimal start-up capital required compared to cattle or poultry." },
                    { title: "Income Model", text: "Provides a reliable secondary revenue stream alongside primary cropping." }
                ],
                img: "https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcQonwiI9akioRoAIspSEfXRPSs8WlRyCQBZyw8IvjNSIg5XdHLf27U1HuJs7sM"
            },
            {
                id: 4,
                type: 'grid-3',
                title: "Indigenous vs. Exotic Species",
                subtitle: "Selecting the Right Biological Agent",
                cards: [
                    { title: "Apis cerana indica", sub: "Common Indian Bee", img: "https://encrypted-tbn0.gstatic.com/licensed-image?q=tbn:ANd9GcSjYPI_dQj1F-Irrdnb_61cWHUEHUpvK5MwTtRHVqnE7aBHv-RazbYqukWkAHJxwBnEUsB1B8vuSjjkNyc" },
                    { title: "Apis dorsata", sub: "Rock Bee", img: "https://encrypted-tbn3.gstatic.com/licensed-image?q=tbn:ANd9GcRCFgRZaCvy9jvhfZN_wwd5xBRLMy12P75uZLgYJSmRxYElZYmnd4UntgSM1BBupB8mE4HbaDBBZeohE_4" },
                    { title: "Apis florea", sub: "Little Bee", img: "https://encrypted-tbn1.gstatic.com/licensed-image?q=tbn:ANd9GcQzgk8Szsslv9UA9u8b6A2xiCjH9AoIJPeXHeElugHiv8HqQwLzZSO6hxAWt88Kso4D9JVMtfvVcnvCgQM" }
                ]
            },
            {
                id: 5,
                type: 'spotlight',
                title: "The Apis mellifera Advantage",
                subtitle: "The Gold Standard for Commercial Production",
                points: [
                    { label: "Yield Efficiency", text: "Superior honey collection capacity compared to local variants." },
                    { label: "Behavioral Traits", text: "Gentler nature (stings less) facilitates easier management." },
                    { label: "Colony Stability", text: "High breeding rates and reduced swarming (longer hive residency)." }
                ],
                img: "https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcSETXJ_ZZaXk5uAHV5DClhaOelMrGNrvaCT3RJe03L-27KKbUrWNZa-9ctdLQ"
            },
            {
                id: 6,
                type: 'concept',
                title: "The Science of Pasturage",
                term: "Pasturage",
                def: "The flora available to bees for nectar and pollen collection.",
                impact: "Input Variable: Floral Diversity directly correlates to Yield Volume and Flavor Profile.",
                img: "https://images.unsplash.com/photo-1469598614039-ccfeb0a21111?q=80&w=1600&auto=format&fit=crop"
            },
            {
                id: 7,
                type: 'diagram-split',
                title: "Crop Production Management",
                content: [
                    { h: "Nutrient Management", t: "16 essential nutrients sourced from Air, Water, and Soil." },
                    { h: "Water Security", t: "Reducing monsoon reliance via Wells, Canals, and River Lift systems." },
                    { h: "Efficiency Patterns", t: "Inter-cropping (definite patterns) and Crop Rotation (pre-planned succession)." }
                ],
                img: "https://raw.githubusercontent.com/Dcode9/Slides/refs/heads/main/e82ccdf9-8424-4ba0-a7e2-0d362dd8b304.png"
            },
            {
                id: 8,
                type: 'card-feature',
                title: "Cattle Farming Optimization",
                subtitle: "Milk, Draught, and Genetic Improvement",
                mainText: "**Utility Classification:** Milch Animals (Milk) vs. Draught Animals (Labor).",
                subText: "**Genetic Strategy:** Cross-breeding to combine desirable traits like lactation duration and disease immunity.",
                card: { top: "Exotic Male (Long Lactation)", mid: "+ Local Female (Disease Resistance)", bot: "= Optimized Hybrid" },
                img: "https://encrypted-tbn3.gstatic.com/licensed-image?q=tbn:ANd9GcQeEJ33gppF95wi16X31AwtIJjiAnz5ixKwnx7QSv6Cu7DPaua9tgTgiMnhUyOJ2170-1BSNp5-Y2cLH4E"
            },
            {
                id: 9,
                type: 'compare-cards',
                title: "Poultry Production Systems",
                subtitle: "Specialization: Layers vs. Broilers",
                left: { title: "Layers", desc: "Raised for Egg production.", diet: "Diet focus: Calcium", img: "https://encrypted-tbn0.gstatic.com/licensed-image?q=tbn:ANd9GcQ-OJyTAu5SJ01zNGmByHMHaPKzxY9VSnAWAtGg64zfjMN1uadGdXAzkAacDqPlqofAqJHRVi72r3zySX8" },
                right: { title: "Broilers", desc: "Raised for Meat.", diet: "Diet focus: Protein & Fat for rapid growth", img: "https://raw.githubusercontent.com/Dcode9/Slides/refs/heads/main/edbec58c-205d-4198-875e-5c9acd019a5c.png" }
            },
            {
                id: 10,
                type: 'layers',
                title: "Fish Production Strategies",
                subtitle: "Composite Fish Culture: Poly-culture system",
                layers: [
                    { name: "Surface Feeders", fish: "Catlas", desc: "Feeds on Zooplankton" },
                    { name: "Column Feeders", fish: "Rohu", desc: "Feeds on suspended algae" },
                    { name: "Bottom Feeders", fish: "Mrigals", desc: "Feeds on weeds and detritus" }
                ],
                img: "https://encrypted-tbn0.gstatic.com/licensed-image?q=tbn:ANd9GcTMi9P0diakPI0v9OH1Va6PxyLppxc-glzZ_dNKFfAD5Aza0gGVLM1cM770LlSa0NJTvsTD6xxlRyOWnbM"
            },
            {
                id: 11,
                type: 'hero-end',
                title: "Sustainable Farming for the Future",
                subtitle: "Integrated Resource Management",
                text: "Meeting the food demands of a growing population without environmental degradation through a holistic approach integrating Apiculture, Agriculture, and Animal Husbandry.",
                img: "https://encrypted-tbn3.gstatic.com/shopping?q=tbn:ANd9GcRIERAWFsluzCFbo00bZGSFwwIcBcq4eQjz_KMmbesh9z5OIZJmo3aHe6RfhNg"
            },
            {
                id: 12,
                type: 'quiz',
                title: "It's Quiz Time!",
                subtitle: "Test your knowledge on Improvement in Food Resources",
                buttonText: "Start Quiz",
                buttonLink: "https://quest.dverse.fun" // TODO: Replace with actual quiz URL
            }
        ];

        let currentIndex = 0;
        const stage = document.getElementById('stage');
        const progressFill = document.getElementById('progress');
        const slideCount = document.getElementById('slide-count');
        const uiControls = document.getElementById('ui-controls');
        const loader = document.getElementById('loader');
        const loaderProgress = document.getElementById('loader-progress');

        // --- Asset Preloading System ---
        async function preloadAssets() {
            // Collect all images from data
            const imageUrls = [];
            views.forEach(view => {
                if(view.img) imageUrls.push(view.img);
                if(view.cards) view.cards.forEach(c => imageUrls.push(c.img));
                if(view.left && view.left.img) imageUrls.push(view.left.img);
                if(view.right && view.right.img) imageUrls.push(view.right.img);
            });

            const total = imageUrls.length;
            let loaded = 0;

            const loadPromise = (url) => {
                return new Promise((resolve) => {
                    const img = new Image();
                    img.src = url;
                    img.onload = () => {
                        loaded++;
                        loaderProgress.innerText = Math.round((loaded/total) * 100) + "%";
                        resolve();
                    };
                    img.onerror = () => {
                        loaded++; // Resolve anyway to not block
                        resolve();
                    };
                });
            };

            await Promise.all(imageUrls.map(url => loadPromise(url)));
            
            // Fade out loader
            loader.style.opacity = '0';
            setTimeout(() => {
                loader.style.display = 'none';
                renderSlide(0); // Start show
            }, 500);
        }

        // --- Background Blob Animation Logic ---
        function updateBlobs(index) {
            const b1 = document.getElementById('blob-1');
            const b2 = document.getElementById('blob-2');
            const b3 = document.getElementById('blob-3');

            // Generate deterministic but "random" positions based on slide index
            // Using percentages for Top and Left to keep them on screen
            
            // Blob 1 (Indigo - Large)
            const b1T = -20 + ((index * 37) % 60); // Range -20% to 40%
            const b1L = -20 + ((index * 19) % 50); // Range -20% to 30%
            
            // Blob 2 (Amber - Medium)
            const b2T = 20 + ((index * 23) % 60);  // Range 20% to 80%
            const b2L = 40 + ((index * 41) % 50);  // Range 40% to 90%
            
            // Blob 3 (Emerald - Small)
            const b3T = 50 + ((index * 53) % 40);  // Range 50% to 90%
            const b3L = -10 + ((index * 67) % 90); // Range -10% to 80%

            b1.style.top = `${b1T}%`;
            b1.style.left = `${b1L}%`;
            
            b2.style.top = `${b2T}%`;
            b2.style.left = `${b2L}%`;
            
            b3.style.top = `${b3T}%`;
            b3.style.left = `${b3L}%`;
        }

        // --- Render Functions ---

        function renderSlide(index) {
            const data = views[index];
            const html = generateHTML(data);
            
            // Update Background Blobs
            updateBlobs(index);

            // Create container
            const container = document.createElement('div');
            container.className = 'view-container view-active';
            container.innerHTML = `<div class="w-full max-w-7xl mx-auto">${html}</div>`;
            
            // Remove old slide
            const old = document.querySelector('.view-active');
            if(old) {
                old.classList.remove('view-active');
                old.style.opacity = '0';
                old.style.transform = 'scale(0.95)';
                old.style.transition = 'all 0.5s ease';
                setTimeout(() => old.remove(), 500);
            }

            stage.appendChild(container);
            
            // Update UI
            slideCount.innerText = `${index + 1}/${views.length}`;
            progressFill.style.width = `${((index + 1) / views.length) * 100}%`;
        }

        function generateHTML(data) {
            // Helper for animations
            const anim = (delay) => `animate-enter ${delay}`;
            
            switch(data.type) {
                case 'hero':
                    return `
                        <div class="flex flex-col md:flex-row items-center gap-12 h-full">
                            <div class="md:w-1/2 space-y-6">
                                <h2 class="text-amber-400 font-bold tracking-widest uppercase text-sm ${anim('delay-1')}">${data.subtitle}</h2>
                                <h1 class="text-5xl md:text-7xl font-serif leading-tight text-white ${anim('delay-2')}">${data.title}</h1>
                                <div class="space-y-4 mt-8">
                                    ${data.points.map((p, i) => `
                                        <div class="bullet-point ${anim(`delay-${i+3}`)}" data-hover>
                                            <span class="marker-icon material-symbols-outlined">check</span>
                                            <p class="text-lg text-gray-300">${p}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="md:w-1/2 ${anim('delay-5')}">
                                <div class="img-card aspect-[4/3] w-full" data-hover>
                                    <img src="${data.img}" class="w-full h-full object-cover" alt="Hero Image">
                                </div>
                            </div>
                        </div>
                    `;

                case 'team':
                    return `
                        <div class="flex flex-col items-center justify-center h-full text-center">
                            <div class="${anim('delay-1')} mb-4 md:mb-8">
                                <h2 class="text-amber-400 font-bold tracking-widest uppercase text-sm mb-3">${data.subtitle}</h2>
                                <h1 class="text-4xl md:text-6xl font-serif text-white">${data.title}</h1>
                            </div>
                            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 md:gap-6 max-w-4xl mx-auto mt-4 md:mt-8">
                                ${data.members.map((m, i) => `
                                    <div class="glass-panel p-3 md:p-6 flex flex-col items-center ${m.role === 'leader' ? 'border-amber-500/50 ring-2 ring-amber-500/30' : ''} ${anim(`delay-${i+2}`)}" data-hover>
                                        <div class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-gradient-to-br ${m.role === 'leader' ? 'from-amber-400 to-amber-600' : 'from-slate-400 to-slate-600'} flex items-center justify-center mb-2 md:mb-4">
                                            <span class="material-symbols-outlined text-white text-xl md:text-2xl">person</span>
                                        </div>
                                        <h3 class="text-sm md:text-lg font-bold ${m.role === 'leader' ? 'text-amber-400' : 'text-white'}">${m.name}${m.role === 'leader' ? ' <span class="text-amber-300 font-mono text-xs md:text-sm">(L)</span>' : ''}</h3>
                                        ${m.role === 'leader' ? '<span class="text-[10px] md:text-xs uppercase tracking-widest text-amber-500/80 mt-1">Team Leader</span>' : '<span class="text-[10px] md:text-xs uppercase tracking-widest text-gray-500 mt-1">Member</span>'}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;

                case 'split':
                    return `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-16 items-center h-full">
                            <div class="order-2 md:order-1 space-y-8">
                                <div class="${anim('delay-1')}">
                                    <h1 class="text-4xl md:text-5xl font-serif mb-2">${data.title}</h1>
                                    <p class="text-amber-400 font-mono">${data.subtitle}</p>
                                </div>
                                <div class="space-y-6">
                                    ${data.left.map((item, i) => `
                                        <div class="glass-panel p-6 ${anim(`delay-${i+2}`)}" data-hover>
                                            <h3 class="text-xl font-bold text-white mb-2">${item.title}</h3>
                                            <p class="text-gray-400 leading-relaxed">${item.text}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="order-1 md:order-2 ${anim('delay-5')}">
                                <div class="img-card aspect-square w-full shadow-2xl shadow-amber-900/20" data-hover>
                                    <img src="${data.img}" class="w-full h-full object-cover">
                                </div>
                            </div>
                        </div>
                    `;

                case 'grid-3':
                    return `
                        <div class="text-center mb-12 ${anim('delay-1')}">
                            <h1 class="text-5xl font-serif mb-4">${data.title}</h1>
                            <p class="text-xl text-gray-400">${data.subtitle}</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            ${data.cards.map((card, i) => `
                                <div class="glass-panel p-4 flex flex-col items-center ${anim(`delay-${i+2}`)}" data-hover>
                                    <div class="img-card w-full aspect-[4/3] mb-6">
                                        <img src="${card.img}" class="w-full h-full object-cover">
                                    </div>
                                    <h3 class="text-2xl font-serif italic text-amber-400 mb-2">${card.title}</h3>
                                    <p class="text-sm font-bold tracking-widest uppercase text-gray-500">${card.sub}</p>
                                </div>
                            `).join('')}
                        </div>
                    `;

                case 'spotlight':
                    return `
                        <div class="relative w-full min-h-[50vh] md:h-[70vh] rounded-3xl overflow-hidden glass-panel ${anim('delay-1')}">
                            <img src="${data.img}" class="absolute inset-0 w-full h-full object-cover opacity-40">
                            <div class="absolute inset-0 bg-gradient-to-b md:bg-gradient-to-r from-black via-black/80 to-transparent p-6 md:p-12 flex flex-col justify-center">
                                <div class="max-w-2xl space-y-6 md:space-y-8">
                                    <div class="${anim('delay-2')}">
                                        <h2 class="text-amber-500 font-bold mb-2 uppercase tracking-wide text-sm">${data.subtitle}</h2>
                                        <h1 class="text-4xl md:text-6xl font-serif text-white">${data.title}</h1>
                                    </div>
                                    <div class="space-y-4">
                                        ${data.points.map((p, i) => `
                                            <div class="flex gap-4 items-start ${anim(`delay-${i+3}`)}">
                                                <div class="w-8 md:w-12 h-1 bg-amber-500 mt-3 rounded-full flex-shrink-0"></div>
                                                <div>
                                                    <h3 class="text-lg md:text-xl font-bold text-white">${p.label}</h3>
                                                    <p class="text-gray-400 text-sm md:text-base">${p.text}</p>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;

                case 'concept':
                    return `
                        <div class="flex flex-col items-center justify-center h-full text-center relative">
                            <h1 class="text-4xl md:text-6xl font-serif mb-16 ${anim('delay-1')}">${data.title}</h1>
                            
                            <div class="relative group cursor-help" data-hover>
                                <h2 class="text-8xl md:text-9xl font-black text-transparent bg-clip-text bg-gradient-to-br from-amber-200 to-amber-600 ${anim('delay-2')} transform transition duration-500 group-hover:scale-110">
                                    ${data.term}
                                </h2>
                                
                                <div class="absolute top-full left-1/2 -translate-x-1/2 mt-8 w-[600px] glass-panel p-8 text-left opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-500 pointer-events-none z-20">
                                    <p class="text-2xl font-serif text-white mb-4">"${data.def}"</p>
                                    <div class="h-px w-full bg-white/20 mb-4"></div>
                                    <p class="text-amber-400 font-mono text-sm">${data.impact}</p>
                                </div>
                            </div>
                            
                            <!-- Background Context Image Faded -->
                            <div class="absolute inset-0 -z-10 opacity-20 animate-scale delay-3">
                                <img src="${data.img}" class="w-full h-full object-cover rounded-3xl filter blur-sm">
                            </div>
                        </div>
                    `;
                
                case 'diagram-split':
                    return `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                            <div class="space-y-8">
                                <h1 class="text-5xl font-serif ${anim('delay-1')}">${data.title}</h1>
                                <div class="space-y-4">
                                    ${data.content.map((c, i) => `
                                        <div class="glass-panel p-6 border-l-4 border-amber-500 ${anim(`delay-${i+2}`)}" data-hover>
                                            <h3 class="text-xl font-bold text-white mb-1">${c.h}</h3>
                                            <p class="text-gray-400">${c.t}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="${anim('delay-5')}">
                                <div class="relative glass-panel p-4">
                                    <span class="absolute top-4 left-4 bg-black/50 px-3 py-1 rounded text-xs uppercase tracking-widest">Soil Profile</span>
                                    <div class="img-card aspect-square w-full bg-white/5" data-hover>
                                        <img src="${data.img}" class="w-full h-full object-cover opacity-90">
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;

                case 'card-feature':
                    return `
                        <div class="flex flex-col md:flex-row gap-12 items-center">
                            <div class="md:w-1/2 space-y-8">
                                <div class="${anim('delay-1')}">
                                    <h1 class="text-5xl font-serif mb-2">${data.title}</h1>
                                    <h2 class="text-amber-400 text-xl">${data.subtitle}</h2>
                                </div>
                                <div class="glass-panel p-6 ${anim('delay-2')}">
                                    <p class="text-lg text-gray-200">${data.mainText}</p>
                                </div>
                                <div class="glass-panel p-6 ${anim('delay-3')}">
                                    <p class="text-lg text-gray-200">${data.subText}</p>
                                </div>
                            </div>
                            <div class="md:w-1/2 relative ${anim('delay-4')}">
                                <div class="img-card aspect-[4/3] w-full" data-hover>
                                    <img src="${data.img}" class="w-full h-full object-cover">
                                </div>
                                <!-- Floating Genetic Card -->
                                <div class="hidden md:block absolute -bottom-8 -left-8 bg-slate-900 border border-amber-500/30 p-6 rounded-2xl shadow-2xl max-w-xs animate-enter delay-6">
                                    <h4 class="text-amber-400 font-bold mb-3 border-b border-amber-500/30 pb-2">Genetic Strategy</h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex justify-between text-white"><span>Exotic Male</span> <span class="text-gray-500">→</span></div>
                                        <div class="flex justify-between text-white"><span>Local Female</span> <span class="text-gray-500">→</span></div>
                                        <div class="font-bold text-green-400 text-center pt-2 mt-2 border-t border-gray-700">${data.card.bot}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;

                case 'compare-cards':
                    return `
                        <div class="text-center mb-12 ${anim('delay-1')}">
                            <h1 class="text-5xl font-serif mb-2">${data.title}</h1>
                            <p class="text-gray-400 text-lg">${data.subtitle}</h1>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
                            <!-- Left Card -->
                            <div class="glass-panel p-8 text-center group ${anim('delay-2')}" data-hover>
                                <div class="w-32 h-32 mx-auto rounded-full overflow-hidden mb-6 border-4 border-yellow-200">
                                    <img src="${data.left.img}" class="w-full h-full object-cover">
                                </div>
                                <h2 class="text-4xl font-serif text-yellow-200 mb-4">${data.left.title}</h2>
                                <p class="text-xl font-bold text-white mb-2">${data.left.desc}</p>
                                <span class="inline-block bg-yellow-400/10 text-yellow-200 px-4 py-1 rounded-full text-sm">${data.left.diet}</span>
                            </div>
                            
                            <!-- Right Card -->
                            <div class="glass-panel p-8 text-center group ${anim('delay-3')}" data-hover>
                                <div class="w-32 h-32 mx-auto rounded-full overflow-hidden mb-6 border-4 border-orange-400">
                                    <img src="${data.right.img}" class="w-full h-full object-cover">
                                </div>
                                <h2 class="text-4xl font-serif text-orange-400 mb-4">${data.right.title}</h2>
                                <p class="text-xl font-bold text-white mb-2">${data.right.desc}</p>
                                <span class="inline-block bg-orange-400/10 text-orange-400 px-4 py-1 rounded-full text-sm">${data.right.diet}</span>
                            </div>
                        </div>
                    `;

                case 'layers':
                    return `
                        <div class="flex flex-col md:flex-row gap-6 md:gap-12 md:h-[60vh]">
                            <div class="w-full md:w-1/3 flex flex-col justify-center space-y-6">
                                <div class="${anim('delay-1')}">
                                    <h1 class="text-3xl md:text-4xl font-serif leading-tight">${data.title}</h1>
                                    <p class="text-amber-400 mt-2">${data.subtitle}</p>
                                </div>
                                <div class="space-y-2">
                                    ${data.layers.map((l, i) => `
                                        <div class="p-4 border-l-2 border-white/20 hover:border-amber-400 hover:bg-white/5 transition-all cursor-pointer ${anim(`delay-${i+2}`)}" data-hover>
                                            <div class="text-xs uppercase tracking-wider text-gray-400">${l.name}</div>
                                            <div class="text-xl md:text-2xl font-bold text-white">${l.fish}</div>
                                            <div class="text-sm text-gray-500">${l.desc}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="w-full md:w-2/3 relative ${anim('delay-5')}">
                                <div class="img-card w-full aspect-video md:h-full" data-hover>
                                    <img src="${data.img}" class="w-full h-full object-cover">
                                </div>
                                <!-- Layer Overlays -->
                                <div class="absolute inset-0 flex flex-col pointer-events-none">
                                    <div class="flex-1 border-b border-white/10 flex items-center justify-end px-4"><span class="bg-black/40 px-2 rounded text-xs">Surface Zone</span></div>
                                    <div class="flex-1 border-b border-white/10 flex items-center justify-end px-4"><span class="bg-black/40 px-2 rounded text-xs">Column Zone</span></div>
                                    <div class="flex-1 flex items-center justify-end px-4"><span class="bg-black/40 px-2 rounded text-xs">Bottom Zone</span></div>
                                </div>
                            </div>
                        </div>
                    `;

                case 'hero-end':
                    return `
                        <div class="text-center max-w-4xl mx-auto space-y-12">
                            <h1 class="text-6xl md:text-8xl font-serif text-transparent bg-clip-text bg-gradient-to-r from-green-300 via-emerald-400 to-green-600 ${anim('delay-1')}">${data.title}</h1>
                            <div class="relative ${anim('delay-2')}">
                                <div class="absolute -inset-4 bg-gradient-to-r from-green-500 to-blue-500 opacity-20 blur-xl rounded-full"></div>
                                <p class="relative text-2xl md:text-3xl font-light leading-relaxed text-gray-100">"${data.text}"</p>
                            </div>
                            <div class="glass-panel p-2 inline-block ${anim('delay-3')}" onclick="switchSlide(0)" data-hover>
                                <img src="${data.img}" class="h-32 w-64 object-cover rounded-xl opacity-60 hover:opacity-100 transition-opacity">
                                <div class="mt-2 text-xs uppercase tracking-widest text-gray-400">Restart Presentation</div>
                            </div>
                        </div>
                    `;

                case 'quiz':
                    return `
                        <div class="flex flex-col items-center justify-center h-full text-center space-y-8 md:space-y-12">
                            <div class="${anim('delay-1')}">
                                <span class="material-symbols-outlined text-amber-400 text-6xl md:text-8xl mb-4 block">quiz</span>
                            </div>
                            <h1 class="text-5xl md:text-8xl font-serif text-transparent bg-clip-text bg-gradient-to-r from-amber-200 via-amber-400 to-amber-600 ${anim('delay-2')}">${data.title}</h1>
                            <p class="text-lg md:text-2xl text-gray-400 max-w-2xl ${anim('delay-3')}">${data.subtitle}</p>
                            <a href="${data.buttonLink}" target="_blank" rel="noopener noreferrer"
                               class="inline-flex items-center gap-3 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-400 hover:to-amber-500 text-black font-bold text-lg md:text-xl px-8 md:px-12 py-4 md:py-5 rounded-2xl transition-all duration-300 shadow-lg shadow-amber-500/25 hover:shadow-amber-500/40 hover:scale-105 ${anim('delay-4')}" data-hover>
                                <span class="material-symbols-outlined">play_arrow</span>
                                ${data.buttonText}
                            </a>
                        </div>
                    `;
            }
        }

        // --- Logic ---

        function switchSlide(idx) {
            currentIndex = idx;
            renderSlide(currentIndex);
        }

        function nextSlide() {
            if(currentIndex < views.length - 1) switchSlide(currentIndex + 1);
        }

        function prevSlide() {
            if(currentIndex > 0) switchSlide(currentIndex - 1);
        }

        // --- Fullscreen & UI Logic ---

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else if (document.exitFullscreen) {
                document.exitFullscreen();
            }
        }

        document.addEventListener('fullscreenchange', () => {
            if (document.fullscreenElement) {
                uiControls.classList.add('ui-hidden');
            } else {
                uiControls.classList.remove('ui-hidden');
            }
        });

        // Mouse Tracking for Fullscreen UI
        document.addEventListener('mousemove', (e) => {
            if (document.fullscreenElement) {
                // If mouse is within bottom 100px
                if (window.innerHeight - e.clientY < 100) {
                    uiControls.classList.remove('ui-hidden');
                } else {
                    uiControls.classList.add('ui-hidden');
                }
            }
        });

        document.addEventListener('keydown', (e) => {
            if(e.key === 'ArrowRight' || e.key === ' ') nextSlide();
            if(e.key === 'ArrowLeft') prevSlide();
        });

        // Touch/Swipe Support for Mobile
        let touchStartX = 0;
        let touchEndX = 0;
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });
        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            const diff = touchStartX - touchEndX;
            if (Math.abs(diff) > 50) {
                if (diff > 0) nextSlide();
                else prevSlide();
            }
        }, { passive: true });

        // Initialize with Preloader
        preloadAssets();


        /* * Physics Cursor Engine 
         */
        const canvas = document.getElementById('cursor-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        
        const resize = () => {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        };
        window.addEventListener('resize', resize);
        resize();

        let mouse = { x: width/2, y: height/2 };
        let cursor = { x: width/2, y: height/2, w: 20, h: 20, r: 10 };
        let target = { x: width/2, y: height/2, w: 20, h: 20, r: 10 };
        let velocity = { x: 0, y: 0 };
        let hoverEl = null;
        let hoverTimeout = null;

        window.addEventListener('mousemove', (e) => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
            
            const el = e.target.closest('[data-hover]');
            if (el) {
                if (hoverTimeout) { clearTimeout(hoverTimeout); hoverTimeout = null; }
                hoverEl = el;
                const rect = el.getBoundingClientRect();
                const style = window.getComputedStyle(el);
                const br = parseFloat(style.borderRadius) || 0;
                
                target.x = rect.left + rect.width / 2;
                target.y = rect.top + rect.height / 2;
                target.w = rect.width + 12;
                target.h = rect.height + 12;
                target.r = br + 6;
            } else {
                if (!hoverTimeout && hoverEl) {
                    hoverTimeout = setTimeout(() => {
                        hoverEl = null;
                        hoverTimeout = null;
                        target.w = 20; target.h = 20; target.r = 10;
                    }, 60);
                } else if (!hoverEl) {
                    target.x = mouse.x;
                    target.y = mouse.y;
                    target.w = 20; target.h = 20; target.r = 10;
                }
            }
        });

        const loop = () => {
            const stiff = 0.2;
            const damp = 0.55;
            
            let tx = (!hoverEl && !hoverTimeout) ? mouse.x : target.x;
            let ty = (!hoverEl && !hoverTimeout) ? mouse.y : target.y;

            // Toggle mix-blend-mode for visibility
            if(!hoverEl && !hoverTimeout) {
                canvas.style.mixBlendMode = 'exclusion';
            } else {
                canvas.style.mixBlendMode = 'normal';
            }

            velocity.x = (velocity.x + (tx - cursor.x) * stiff) * damp;
            velocity.y = (velocity.y + (ty - cursor.y) * stiff) * damp;
            cursor.x += velocity.x;
            cursor.y += velocity.y;
            cursor.w += (target.w - cursor.w) * 0.25;
            cursor.h += (target.h - cursor.h) * 0.25;
            cursor.r += (target.r - cursor.r) * 0.25;

            ctx.clearRect(0, 0, width, height);
            ctx.save();
            ctx.translate(cursor.x, cursor.y);

            if (!hoverEl && !hoverTimeout) {
                const speed = Math.sqrt(velocity.x**2 + velocity.y**2);
                const angle = Math.atan2(velocity.y, velocity.x);
                const stretch = Math.min(Math.pow(speed * 0.04, 1.2), 0.4);
                ctx.rotate(angle);
                ctx.scale(1 + stretch, 1 - stretch);
                ctx.rotate(-angle);
            }

            const rr = Math.min(cursor.r, Math.min(cursor.w, cursor.h)/2);
            ctx.beginPath();
            ctx.roundRect(-cursor.w/2, -cursor.h/2, cursor.w, cursor.h, rr);

            if (hoverEl || hoverTimeout) {
                ctx.lineWidth = 2;
                ctx.strokeStyle = '#fbbf24';
                ctx.shadowColor = '#fbbf24';
                ctx.shadowBlur = 10;
                ctx.stroke();
                ctx.fillStyle = 'rgba(251, 191, 36, 0.1)';
                ctx.fill();
            } else {
                ctx.fillStyle = 'white';
                ctx.shadowBlur = 0;
                ctx.fill();
            }
            ctx.restore();
            requestAnimationFrame(loop);
        };
        loop();

    </script>
</body>
</html>
